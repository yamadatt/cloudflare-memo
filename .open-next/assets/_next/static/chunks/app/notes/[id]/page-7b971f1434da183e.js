(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}});let n=r(1209),o=r(5153),l=r(7197)},4798:(e,t,r)=>{"use strict";r.d(t,{default:()=>R});var n=r(5155),o=r(2115),l=r(926);let i=(0,l.createServerReference)("400ed55453a73f38819d710d92f838f0dab9f4fe14",l.callServer,void 0,l.findSourceMapURL,"deleteNoteAction");var s=r(5299);let a=(0,r(5121).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var c=r(296),u=r(4416),d=r(6553),f=r(9686),h=r(1402),p=r(3127);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class v extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,h.s)(e)&&e.offsetWidth||0,n=(0,h.s)(e)&&e.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=r-o.width-o.left,o.bottom=n-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function x(e){var t,r;let{children:l,isPresent:i,anchorX:s,anchorY:a,root:c,pop:u}=e,d=(0,o.useId)(),f=(0,o.useRef)(null),h=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:x}=(0,o.useContext)(p.Q),b=function(...e){return o.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=m(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():m(e[t],null)}}}}(...e),e)}(f,null!=(r=null==(t=l.props)?void 0:t.ref)?r:null==l?void 0:l.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:n,right:o,bottom:l}=h.current;if(i||!1===u||!f.current||!e||!t)return;f.current.dataset.motionPopId=d;let p=document.createElement("style");x&&(p.nonce=x);let m=null!=c?c:document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule('\n          [data-motion-pop-id="'.concat(d,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===s?"left: ".concat(n):"right: ".concat(o),"px !important;\n            ").concat("bottom"===a?"bottom: ".concat(l):"top: ".concat(r),"px !important;\n          }\n        ")),()=>{m.contains(p)&&m.removeChild(p)}},[i]),(0,n.jsx)(v,{isPresent:i,childRef:f,sizeRef:h,pop:u,children:!1===u?l:o.cloneElement(l,{ref:b})})}let b=e=>{let{children:t,initial:r,isPresent:l,onExitComplete:i,custom:s,presenceAffectsLayout:a,mode:c,anchorX:d,anchorY:h,root:p}=e,m=(0,u.M)(y),v=(0,o.useId)(),b=!0,g=(0,o.useMemo)(()=>(b=!1,{id:v,initial:r,isPresent:l,custom:s,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;i&&i()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[l,m,i]);return a&&b&&(g={...g}),(0,o.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[l]),o.useEffect(()=>{l||m.size||!i||i()},[l]),t=(0,n.jsx)(x,{pop:"popLayout"===c,isPresent:l,anchorX:d,anchorY:h,root:p,children:t}),(0,n.jsx)(f.t.Provider,{value:g,children:t})};function y(){return new Map}var g=r(5601);let w=e=>e.key||"";function j(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let k=e=>{let{children:t,custom:r,initial:l=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync",propagate:f=!1,anchorX:h="left",anchorY:p="top",root:m}=e,[v,x]=(0,g.xQ)(f),y=(0,o.useMemo)(()=>j(t),[t]),k=f&&!v?[]:y.map(w),M=(0,o.useRef)(!0),R=(0,o.useRef)(y),S=(0,u.M)(()=>new Map),E=(0,o.useRef)(new Set),[P,C]=(0,o.useState)(y),[N,_]=(0,o.useState)(y);(0,d.E)(()=>{M.current=!1,R.current=y;for(let e=0;e<N.length;e++){let t=w(N[e]);k.includes(t)?(S.delete(t),E.current.delete(t)):!0!==S.get(t)&&S.set(t,!1)}},[N,k.length,k.join("-")]);let L=[];if(y!==P){let e=[...y];for(let t=0;t<N.length;t++){let r=N[t],n=w(r);k.includes(n)||(e.splice(t,0,r),L.push(r))}return"wait"===a&&L.length&&(e=L),_(j(e)),C(y),null}let{forceRender:A}=(0,o.useContext)(c.L);return(0,n.jsx)(n.Fragment,{children:N.map(e=>{let t=w(e),o=(!f||!!v)&&(y===N||k.includes(t));return(0,n.jsx)(b,{isPresent:o,initial:(!M.current||!!l)&&void 0,custom:r,presenceAffectsLayout:s,mode:a,root:m,onExitComplete:o?void 0:()=>{if(E.current.has(t)||(E.current.add(t),!S.has(t)))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null==A||A(),_(R.current),f&&(null==x||x()),i&&i())},anchorX:h,anchorY:p,children:e},t)})})};var M=r(4492);function R(e){let{noteId:t}=e,[r,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),d=async()=>{if(window.confirm("このノートを削除してもよいですか？この操作は取り消せません。")){l(!0),u(null);try{let e=await i(t);e.success||(u(e.error),l(!1))}catch(e){u("削除中に予期しないエラーが発生しました。"),l(!1)}}};return(0,n.jsxs)("div",{className:"relative group",children:[(0,n.jsx)(k,{children:c&&(0,n.jsx)(M.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute bottom-full right-0 mb-2 w-max px-3 py-1.5 bg-red-500 text-white text-xs font-bold rounded-lg shadow-lg",children:c})}),(0,n.jsxs)("button",{onClick:d,disabled:r,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-red-500 hover:text-white border border-red-500 hover:bg-red-500 dark:border-red-400 dark:text-red-400 dark:hover:bg-red-400 dark:hover:text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95",children:[r?(0,n.jsx)(s.A,{className:"w-4 h-4 animate-spin"}):(0,n.jsx)(a,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:r?"削除中...":"削除"})]})]})}},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(5121).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9347:(e,t,r)=>{Promise.resolve().then(r.bind(r,4798)),Promise.resolve().then(r.t.bind(r,2619,23))}},e=>{e.O(0,[619,188,441,255,358],()=>e(e.s=9347)),_N_E=e.O()}]);