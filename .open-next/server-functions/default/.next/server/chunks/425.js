exports.id=425,exports.ids=[425],exports.modules={8595:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(65169),f=c.n(e);function g(){return(0,d.jsxs)("div",{className:"text-center py-24",children:[(0,d.jsx)("p",{className:"text-5xl font-bold text-[rgba(8,19,26,0.14)] mb-6",children:"404"}),(0,d.jsx)("h2",{className:"text-xl font-bold text-[#08131a] mb-3",children:"ノートが見つかりませんでした"}),(0,d.jsx)("p",{className:"text-sm text-[rgba(8,19,26,0.44)] mb-8",children:"お探しのノートは存在しないか、削除された可能性があります。"}),(0,d.jsx)(f(),{href:"/",className:"inline-block px-5 py-2 text-sm font-bold text-white bg-[#41b883] rounded-lg hover:bg-[#3aa876] transition-colors",children:"ノート一覧に戻る"})]})}},12092:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,3991,23))},14099:(a,b,c)=>{"use strict";c.d(b,{pn:()=>k,A$:()=>m,mB:()=>l});var d=c(75879);c(68633);var e=c(82161),f=c(23526);function g(a,b){let c={};return(a&&0!==a.trim().length||(c.title="タイトルを入力してください"),Object.keys(c).length>0)?{valid:!1,errors:c}:{valid:!0}}async function h(a,b,c){let d=g(b,c);if(!d.valid)return{success:!1,error:d.errors.title??"バリデーションエラーが発生しました"};try{let d=await a.createNote({title:b.trim(),content:c});return{success:!0,noteId:d.id}}catch(a){return console.error("[createNoteService]",{message:a instanceof Error?a.message:"不明なエラー",timestamp:new Date().toISOString(),context:{title:b}}),{success:!1,error:"データの保存中にエラーが発生しました。しばらくしてから再度お試しください。"}}}async function i(a,b,c,d){let e=g(c,d);if(!e.valid)return{success:!1,error:e.errors.title??"バリデーションエラーが発生しました"};try{return await a.updateNote({id:b,title:c.trim(),content:d}),{success:!0,noteId:b}}catch(a){return console.error("[updateNoteService]",{message:a instanceof Error?a.message:"不明なエラー",timestamp:new Date().toISOString(),context:{id:b,title:c}}),{success:!1,error:"データの更新中にエラーが発生しました。しばらくしてから再度お試しください。"}}}async function j(a,b){try{return await a.deleteNote(b),{success:!0,noteId:b}}catch(a){return console.error("[deleteNoteService]",{message:a instanceof Error?a.message:"不明なエラー",timestamp:new Date().toISOString(),context:{id:b}}),{success:!1,error:"データの削除中にエラーが発生しました。しばらくしてから再度お試しください。"}}}async function k(a,b){let c=b.get("title")??"",d=b.get("content")??"",g=await (0,f.TM)(),i=await h(g,c,d);return i.success&&(0,e.redirect)("/"),i}async function l(a,b){let c=b.get("id")??"",d=b.get("title")??"",g=b.get("content")??"",h=await (0,f.TM)(),j=await i(h,c,d,g);return j.success&&(0,e.redirect)(`/notes/${c}`),j}async function m(a){let b=await (0,f.TM)(),c=await j(b,a);return c.success&&(0,e.redirect)("/"),c}(0,c(51669).D)([k,l,m]),(0,d.A)(k,"60a925e381af67cf32dc026684ecf0a033b14657f8",null),(0,d.A)(l,"60b0df7c6dec56c921536cefb32fd5a8b8b8c9ab37",null),(0,d.A)(m,"400ed55453a73f38819d710d92f838f0dab9f4fe14",null)},15046:(a,b,c)=>{Promise.resolve().then(c.bind(c,72912))},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(75338),e=c(65169),f=c.n(e),g=c(75289),h=c(33411);c(82704);let i={title:"memo",description:"Cloudflare D1を使ったシンプルなメモ帳アプリ"};function j({children:a}){return(0,d.jsx)("html",{lang:"ja",children:(0,d.jsxs)("body",{className:"min-h-screen bg-background text-foreground transition-colors duration-300",children:[(0,d.jsx)("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800 h-16",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto px-6 h-full flex items-center justify-between",children:[(0,d.jsxs)(f(),{href:"/",className:"flex items-center gap-2 text-xl font-bold tracking-tight hover:opacity-80 transition-opacity",children:[(0,d.jsx)(g.A,{className:"w-6 h-6 text-accent"}),(0,d.jsx)("span",{children:"memo"})]}),(0,d.jsxs)(f(),{href:"/notes/new",className:"flex items-center gap-1.5 px-4 py-2 text-sm font-semibold text-white bg-accent hover:bg-accent-hover rounded-full shadow-lg shadow-blue-500/20 transition-all active:scale-95",children:[(0,d.jsx)(h.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"書く"})]})]})}),(0,d.jsx)("main",{className:"max-w-5xl mx-auto px-6 py-12 md:py-16",children:a})]})})}},23294:(a,b,c)=>{Promise.resolve().then(c.bind(c,39722))},23526:(a,b,c)=>{"use strict";c.d(b,{rE:()=>h,jU:()=>i,TM:()=>g});var d=c(89368);function e(a){return{id:a.id,title:a.title,content:a.content,createdAt:a.created_at,updatedAt:a.updated_at}}class f{constructor(a){this.db=a}async getAllNotes(){return(await this.db.prepare("SELECT * FROM notes ORDER BY created_at DESC").all()).results.map(e)}async getNoteById(a){let b=await this.db.prepare("SELECT * FROM notes WHERE id = ?").bind(a).first();return b?e(b):null}async createNote(a){let b=crypto.randomUUID(),c=new Date().toISOString();return await this.db.prepare("INSERT INTO notes (id, title, content, created_at, updated_at) VALUES (?, ?, ?, ?, ?)").bind(b,a.title,a.content,c,c).run(),{id:b,title:a.title,content:a.content,createdAt:c,updatedAt:c}}async updateNote(a){let b=new Date().toISOString();await this.db.prepare("UPDATE notes SET title = ?, content = ?, updated_at = ? WHERE id = ?").bind(a.title,a.content,b,a.id).run();let c=await this.getNoteById(a.id);if(!c)throw Error(`ノートが見つかりませんでした: ${a.id}`);return c}async deleteNote(a){await this.db.prepare("DELETE FROM notes WHERE id = ?").bind(a).run()}}async function g(){return new f((await (0,d.DM)({async:!0})).env.DB)}async function h(){return(await g()).getAllNotes()}async function i(a){return(await g()).getNoteById(a)}},31093:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,3991,23))},33230:(a,b,c)=>{Promise.resolve().then(c.bind(c,77731))},39722:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yamadatt/Downloads/cloudflare-memo/components/NoteForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yamadatt/Downloads/cloudflare-memo/components/NoteForm.tsx","default")},40821:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,65169,23))},41697:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yamadatt/Downloads/cloudflare-memo/app/error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yamadatt/Downloads/cloudflare-memo/app/error.tsx","default")},51838:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},52493:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"400ed55453a73f38819d710d92f838f0dab9f4fe14":()=>d.A$,"60a925e381af67cf32dc026684ecf0a033b14657f8":()=>d.pn,"60b0df7c6dec56c921536cefb32fd5a8b8b8c9ab37":()=>d.mB});var d=c(14099)},53948:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,65169,23))},56566:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},63494:(a,b,c)=>{Promise.resolve().then(c.bind(c,41697))},72912:(a,b,c)=>{"use strict";c.d(b,{default:()=>m});var d=c(21124),e=c(38301),f=c(3991),g=c.n(f),h=c(55248),i=c(79944),j=c(14263),k=c(81100);let l={success:!0,noteId:""};function m({action:a,initialTitle:b="",initialContent:c="",cancelHref:f,submitLabel:m,noteId:n}){let[o,p,q]=(0,e.useActionState)(a,l);return(0,d.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"max-w-3xl mx-auto",children:[(0,d.jsx)("div",{className:"mb-10 flex items-center justify-between",children:(0,d.jsxs)(g(),{href:f,className:"group flex items-center gap-2 text-zinc-400 hover:text-foreground transition-colors font-medium text-sm",children:[(0,d.jsx)("div",{className:"p-2 rounded-full group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800 transition-colors",children:(0,d.jsx)(i.A,{className:"w-4 h-4"})}),(0,d.jsx)("span",{children:"キャンセル"})]})}),(0,d.jsxs)("form",{action:p,className:"space-y-12 pb-32",children:[n&&(0,d.jsx)("input",{type:"hidden",name:"id",value:n}),!o.success&&o.error&&(0,d.jsxs)(h.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-2xl p-4 flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),(0,d.jsx)("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:o.error})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:b,required:!0,className:"w-full text-3xl md:text-5xl font-black text-foreground bg-transparent border-none outline-none placeholder:text-zinc-300 dark:placeholder:zinc-700 disabled:opacity-50",placeholder:"タイトルを入力",disabled:q,autoFocus:!0}),(0,d.jsx)("div",{className:"h-px w-full bg-zinc-100 dark:bg-zinc-800"})]}),(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)("textarea",{id:"content",name:"content",defaultValue:c,rows:15,className:"w-full text-lg text-foreground bg-transparent border-none outline-none placeholder:text-zinc-300 dark:placeholder:zinc-700 disabled:opacity-50 resize-none leading-relaxed",placeholder:"ここに内容を記述...",disabled:q})}),(0,d.jsx)("div",{className:"fixed bottom-8 left-0 right-0 px-6 pointer-events-none",children:(0,d.jsx)("div",{className:"max-w-3xl mx-auto flex justify-end pointer-events-auto",children:(0,d.jsxs)("button",{type:"submit",disabled:q,className:"group flex items-center gap-2 px-8 py-4 text-sm font-bold text-white bg-accent hover:bg-accent-hover rounded-full shadow-2xl shadow-blue-500/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95",children:[q?(0,d.jsx)(j.A,{className:"w-4 h-4 animate-spin"}):(0,d.jsx)(k.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:q?"保存中...":m})]})})})]})]})}},77731:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(21124);c(38301);var e=c(3991),f=c.n(e);function g({error:a,reset:b}){return(0,d.jsxs)("div",{className:"text-center py-24",children:[(0,d.jsx)("p",{className:"text-5xl font-bold text-[rgba(8,19,26,0.14)] mb-6",children:"500"}),(0,d.jsx)("h2",{className:"text-xl font-bold text-[#08131a] mb-3",children:"エラーが発生しました"}),(0,d.jsx)("p",{className:"text-sm text-[rgba(8,19,26,0.44)] mb-8",children:"予期しないエラーが発生しました。しばらくしてから再度お試しください。"}),(0,d.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,d.jsx)("button",{onClick:b,className:"px-5 py-2 text-sm font-bold text-white bg-[#41b883] rounded-lg hover:bg-[#3aa876] transition-colors",children:"再試行"}),(0,d.jsx)(f(),{href:"/",className:"px-5 py-2 text-sm font-bold text-[rgba(8,19,26,0.66)] border border-[rgba(8,19,26,0.14)] rounded-lg hover:text-[#08131a] hover:border-[rgba(8,19,26,0.3)] transition-colors",children:"ノート一覧に戻る"})]})]})}},82704:()=>{}};